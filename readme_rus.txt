UFO2000 aka X-COM: Gladiators 

0.3.1 version manual



home: http://ufo2000.sourceforge.net/
      http://pages.ykt.ru/ufo2000/
      


Игре требуются файлы данных (спрайты, музыка и т.д.) из
X-COM: UFO Defense (UFO: Enemy unknown).
Имейте в виду, что существует обновленная версия UFO1 (version 1.4), 
в которой используются другие файлы со звуками -- если в вашей версии 
UFO1 в директории SOUND нет файлов "SOUND1.CAT" "SOUND2.CAT",
то берите "ufo2000dat.zip" из homepage



О программе


Однажды давным-давно в далекой галактике одного из параллельных миров
на Землю прилетели алиенсы и... покорили ее. Другого результата нельзя
было и ожидать т.к. ЭТО ОНИ ПРИЛЕТЕЛИ к землянам, а не земляне к ним.
И вот Земля стала частью великой и славной империи.
Алиенсы стали обживаться на новой родине. Человечество не уничтожено,
а оставлено в подчинении новых хозяев. Потом по мере увеличения 
количества алиенсов, равное количество людей будет убывать (от слова убивать).
И по проверенному плану через 100 лет человечество останется только 
в зоопарках. Но это будет не скоро, а пока что не прошло более года после
захвата и  начинается "UFO2000 aka X-Com: Gladiators".




Шрифты


В игре используются шрифты из UFO1: они содержатся в файлах "biglets.dat"
и "smallset.dat", все было бы хорошо если бы не одно обстоятельство - в
России широко распространена русифицированная версия UFO1, в ней эти шрифты
"немного" исправлены :), да так что все английские буквы сменились на
кириллицу. На homepage есть архив с оригинальными шрифтами.




Игра через DirectPlay ( win only )


В локальной сети предпочтительнее играть по ipx протоколу - под DP он
позволяет гарантированную доставку сообщений. При выборе modem, serial и
клиента tcp/ip экран переключается с fullscreen на стандартный диалог
windows выбора опций, при этом игровой экран полностью стирается и после
переключении обратно в игру не всегда автоматически перерисовывается -
поэтому жмите F4 или F5, также для клиента он может оставаться долгое время
(не более 1 мин) не реагируя на F4 это из-за того что он находиться в
вызванной функции DirectX, например, подключения к серверу и поиска сессий,
и не вернул управление игре.




Редакторы карты и юнита


F2 сокраняеть, F3 грузит, ESC выходит.
Для юнита -- левый CTRL (ALT по другому) показывает максимальную 
прочность предмета.

В редакторе можно изменить параметры солдата и выбрать для него аммуницию.
Параметры солдата берутся из файла "soldier.dat". Его формат совпадает с
форматом файла из UFO1. Только количество солдат не должно быть больше 10,
если их больше - остальная часть файла просто отсекается. Количество солдат
задается параметром "platoon_size" в "ufo2000.ini".

Чтобы изменить параметры солдата нажмите мышкой на окно с параметрами.
Действительные параметры - время, здоровье, меткость стрельбы, меткость
бросания. Сделаны ограничения: минимум параметра - 50, максимум - 80.
Максимальная сумма параметров для одного солдата - 240. Других ограничений
нет :)

Некоторые вещи в "Armoury" пока нельзя использовать, поэтому их нельзя
с него взять. Никаких ограничений на количество и качество оружия для
одного солдата нет. Можете всех солдат вооружить самым смертельным оружием.
Правда противник тоже может сделать тоже самое :). Поэтому редактор
можно вызвать и из "Mission planner"'а (для разоружения :).




Начало игры


Для начала один игрок должен стартовать как клиент, другой как сервер.
Клиент подключается к серверу в "Connect chat"'е. Только после того как
клиент подключится можно нажать F10 для перехода в "Mission planner". Еще
можно нажать ESC - для выхода + F4 - перерисовать экран. 
Больше ничего в "Connect chat"'е сделать нельзя.




Планирование 


Следующий этап - выбор юнитов для боя, и их начальных позиций на карте.
По середине экрана распологается карта, можно сгененировать новую карту
если нажать на слово "NEW" или загрузить - "LOAD".

По сторонам от карты выводятся списки солдат - ваших и противника, слева
для сервера, справа для клиента. Чтобы выбрать солдата надо нажать левой
кнопкой мыши на его имя, потом выбрать его начальную позицию на карте. Если
нажать правой кнопкой на выбранного солдата он перестанет быть избранным :).

Для редактирования солдата надо нажать левой кнопкой мыши на его имя
при нажатом левом CTRL. При таком редактировании допустимы все операции
изменения параметров солдата и его оружия.

Под списком солдат выводится их общая информация:
   1) "total men points=..." это сумма параметров выбранных солдат.
   2) количество оружия у выбранных солдат. 

Эту же информация получает о вас противник, правда только после того,
как вы нажмете на слово "SEND", при этом оно из красного должно стать 
зеленым. Если после этого изменить что-нибудь (выбрать еще одного
солдата и т.д.) надо снова нажать на "SEND".

Только после того как оба слова "SEND" станут зелеными можно нажать
на "START" для подтверждения старта.

Игра стартует после того как оба слова "START" станут зелеными.
Такая процедура сделана для согласования количества солдат и оружия,
так как желательно, чтобы у игроков все было более менее равным :)

Если тип игры - "hotseat", то после "SEND" жмите F10 для продолжения.




Управление


Все действия солдатами, как и в UFO1 производятся мышкой.
Во время игры можно отправлять и принимать сообщения от другого игрока,
они выводятся в окно сообщений. Собственные зеленым светом, противника -
красным, белым - сообщения программы.

F1    вкл/выкл вывод служебных пакетов
F2    сохранить (-)
F3    загрузить (-)
F4    перерисовать экран
F5    рестарт
F9    вкл/выкл WATCH режим (-)
F10   переключение полноэкранный/оконный
ESC   выход из игры
ALT+X быстрый выход в OS

курсоры, keypad +/-   изменение размеров окна карты

правый CTRL  переключение рус/лат, индикатор в правом верхнем углу "Инфо".
             в игру встроен собственный русификатор, другие, в том числе
             виндовые не работают.

левый CTRL   при прицеливании показывает идеальную траекторию пули или
				 кидаемого предмета, иначе показывает путь движения.
				 В режиме Inventory показывает состояния предметов (прочность)

левый SHIFT  при стрельбе позволяет произвести точное прицеливание
             рисуется образ клетки 12x16x16 правда не в виде куба
             а в виде 12 прямоугольников 16x16 :)
                 2 5 8 11
                 1 4 7 10
                 0 3 6 9
             

ENTER послать сообщение
BKSP  удалить последний символ в сообщении
TAB   в VGA режиме рисует на экран содержание "Инфо" (-)

F11   включение/выключение режима оповещения
      служит для определения, того что связь нормальная
      с интервалом в 1 сек, посылаются пакеты "NOTE" в удаленный компьютер
      и принимаются с удаленного, если такой пакет не приходит включается
      счетчик секунд от последнего принятого пакета - они выводится
      в правом верхнем углу "Инфо".
      Если в терминале необходимо выполнить непрерываемую команду модема,
      например "atdp123456", лучше перед этим выключить режим оповещения.

F12   сохранить экран в файл "snapshot.pcx"


В окне "Инфо" выводятся получаемые и отсылаемые сообщения - вида "_Xmes_...",
а также служебные пакеты используемые самой игрой - "_Xcom_...".




Версии


Проверенные мной версии: 
1) djgpp - компилируется в djgpp, может запускаться из под dos и windows
           ipx, modem, tcp/ip(со специальным vxd)
           работает только хотсит+tcp/ip, остальное уже нет
2) linux - требуется glibc 2, ядро не ниже 2.x.x
           tcp/ip
3) win   - используется DirectX 6, компилируется на Visual C++ 6.0
           полный DirectPlay (ipx, tcp/ip, modem, serial)

На самом деле игру можно сделать любым компилятором для любой ОС,
на которой существует библиотека Allegro. Исходники игры написаны на 
чистом C++ без никаких извращений и ассемблера.




Звук


Программа делает автодетект звуковых карт, единственная проблема, что
звук очень тихий, так что делайте громкость повыше :)
Громкость звука можно увеличить уменьшив значение опции digvoices -
количество одновременно проигрываемых сэмплов.
Возможно проигрывание модулей IT, MOD, S3M, XM - для этого
опция modules установлена на yes, modname - имя модуля
modvolume - громкость, modvoices - количество голосов для проигрывания
модуля. В процессе игры можно загрузить другой модуль (временно удалено).
Значения digvoices и modvoices должны быть степенями 2.
Модули играются только в djgpp версии.




Карта 


В UFO1&2 тактическая карта собирается из готовых блоков 10x10 находящихся в
директории MAPS, максимальное возможное число блоков - 36 или 6x6 или 12x3,
такая карта храниться в файле "GEODATA.DAT"
UFO2000 тоже читает начальную карту из этого файла, кроме того можно
запустить UFO2000 с параметром - именем файла карты например
         "UFO2000.EXE GEODATA.DAT_cult"
или можно сгенерировать новую карту в connect чате. Размеры новой
карты (в блоках 10x10!) определяют опции "map_width" и "map_height"
в "ufo2000.ini". Пока нормально работают карты из блоков
CULTA00.MAP ... CULTA18.MAP

формат GEODATA.DAT:

struct GEODATA_DAT {
	unsigned short x_size;  //Distance e/w in tens of tiles        
	unsigned short y_size;  //Distance n/s in tens of tiles        
	unsigned short z_size;  //Height of map (tiles)                
	unsigned short ship[2]; //The types of each of the two ships   
	unsigned short terrain; //Terrain set; refers to the MCD combo sets ---
	                        //JUNGLE, FOREST, etc...
	unsigned char	map[36]; //The actual map data- refers to the number at the
	                        //end of map name; i.e. urban12 would be number 12

     ......    остальная часть не используется
};

   unsigned short terrain:
#define JUNGLE    0
#define CULTA     1    <----
#define FOREST    2
#define XBASE_    3
#define UBASE_    4
#define URBAN     5
#define DESERT    6
#define MOUNT     7
#define POLAR     8
#define MARS      9




Главное меню

Внешний облик главного меню с кровью или без, выбирается через опцию
"bloodymenu" в файле "ufo2000.ini". Правда существуют очень маленькая
вероятность того, что значение "bloodymenu" будет изменено на обратное :).




Игра по модему ( djgpp only )

Опция "comport" должна содержать правильный номер порта.
Соединение может быть установленным до запуска ufo2000.exe,
лучше всего соединиться через терминал Дос Навигатора,
убедиться, что связь нормальная и затем уже начать игру.



Игра по сети с ipx протоколом  ( djgpp only )

Клиент автоматически производить поиск серверов по сети. Подключается
происходит к первому найденному. В сети могут играть одновременно 
неограниченное количество клиент/серверов. Так как ipx не надежный
протокол в сильнозагруженных сетях игра нежелательна.



Игра по сети с tcp/ip протоколом ( djgpp only )

Для работы необходимо установить windows socket extention (sockvxd.exe).
Используемый порт по умолчанию - 2000. Клиент должен ввести ip адрес сервера.
Последний введенный адрес сохраняется под опцией "server".






Настройки "ufo2000.ini"


Некоторые измененные параметры записываются самой программой перед завершением.

Общие опции:

[General]
port = 2000            # ip port                      not for windows version
server = 10.0.0.1      # default ip address of server not for windows version
comport = 2            # к которому подключен модем   not for windows version
width = 430            # размеры игрового экрана
height = 280           #     сохраняются самой программой при выходе
map_width = 4          # размеры генерируемой карты
map_height = 4         #    map_width*map_height <= 36 !
russian = 1            # 0 - disable CTRL rus/lat,  1 - enable
bloodymenu = 0         # 0 - no bloody menu, 1 - yes!
sound = 1              # sound fx & music
digvoices = 16         #  ^2  (2, 4, 8, ...)
modules = 0            #     n               
modvoices = 8          #       o             
modname = templsun.xm  #         t           
modvolume = 125        #            u s e d  
                       

Опции редактора

[Editor]
platoon_size = 10      # количество солдат в "soldier.dat"
                       # не может быть больше 10
last_map_name = geodata.dat       # используются 
last_unit_name = default.units    #              в редакторах
